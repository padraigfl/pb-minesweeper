{"version":3,"file":"pbminesweeper.module.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/Game/images/open1.png","../src/Game/images/open2.png","../src/Game/images/open3.png","../src/Game/images/open4.png","../src/Game/images/open5.png","../src/Game/images/open6.png","../src/Game/images/open7.png","../src/Game/images/open8.png","../src/Game/images/question.png","../src/Game/images/flag.png","../src/Game/images/misflagged.png","../src/Game/images/mine-death.png","../src/Game/images/mine-ceil.png","../src/Game/Cell.js","../src/Game/images/digit0.png","../src/Game/images/digit1.png","../src/Game/images/digit2.png","../src/Game/images/digit3.png","../src/Game/images/digit4.png","../src/Game/images/digit5.png","../src/Game/images/digit6.png","../src/Game/images/digit7.png","../src/Game/images/digit8.png","../src/Game/images/digit9.png","../src/Game/images/digit-.png","../src/Game/Counter.js","../src/Game/Status.js","../src/Game/Game.js","../src/App.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK0lEQVR42mNgGAng/38IpkgzWQYgaybZAHTNA+OFIW4AtkAkySCKDRhKAAB8jU+x6ZwbNAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAL0lEQVR42mNgGIagmuE/XkyRZoKG4FNEtCvIMZwkb1EUmLTVSJFzaRKNZCemIQcA2OFf+6sS8JAAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK0lEQVR42mNgGF7gPxARwhQbQNAQYgynjwEUO5+q/qdfGFAcjTRLA4MbAACQL3uF13XmMAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAJ0lEQVR42mNgGK6g+j8CY+PT1gBsiulnALJCfJh2BpDirZFmwGAGAE2EUrFtzr/cAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAJklEQVR42mNgGF6gmoHhPzGYPgZQ7AWahQFtA5Fu3hvYdMAw/AAAgjlnXUQq77YAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKklEQVR42mNgGIaguvo/XkyRZpIMoNj5NPE/VcIAryH4FNHfAJqFw/ADANeOjOlonwSHAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHklEQVR42mNgGHbgP5GYdgYQazj9DRi1fSCjbggAADl0K9Xj0B5TAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALElEQVR42mNgGH6gurr6Pz5MkWaChuBTRB8DKA4DqgbiwIQBxdFIlUAcegAAKVC5Qc8U50QAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALElEQVR42mNgGNbgPxomSzMuPu0NIGTgENFMFQOolhYGuxf27t37f2A0AwEAQr8eVaRMnxsAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAL0lEQVR42mNgGN7gPxD9B1NkaiTLAHTN9HcBVcIA05wBMuA/GiZbI8kGUWzAEAMA9m03yW7foZAAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVklEQVR42tVSQQ4AIAjy/5+mdfBQoTJbh9g8BaSi2Q+AygI4GTJ3ewCp7KPD5KhS7B5OnCBiKEtbBKSrWMhajkYqjRKDNyOkSagJ3MUYENC5wt4pdzAAjVmTbVcYf78AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAQ0lEQVR42mNgoAb4D0TkYoIGMNDdAAYkGh1jMxCrCxjwYKJcAFYIBYQMoZ4BDGRgvC4gNhyobwBVYoHidDCwSZlUDABNhnuTt8N6swAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAN0lEQVR42mNgGArgP90N+I9Eo2OiDfyPBxOnGQbIMYRsA/6Tgck2iOwA/E+3WKA4HQxsUiYJAAAf1lyk4ulhiwAAAABJRU5ErkJggg==\"","import React from 'react';\nimport cx from 'classnames';\nimport styles from './_game.module.scss';\nimport * as images from './images/board';\n\nconst Cell = props => {\n  let Tag = 'button';\n  let image;\n  if (props.clicked || props.flagged || props.questioned) {\n    Tag = 'div';\n  }\n\n  if (props.end) {\n    image = images.mineDeath;\n  } else if (props.flagged && props.gameOver) {\n    image = images.misflag;\n  } else if (props.flagged) {\n    image = images.flag;\n  } else if (props.questioned) {\n    image = images.question;\n  } else if (props.gameOver && props.mine) {\n    image = images.mine;\n  } else if (props.clicked && props.warningCount && !props.mine) {\n    image = images[`warning${props.warningCount}`];\n  }\n\n  return (\n    <Tag\n      className={cx(styles.cell, props.className, {\n        [styles.flagged]: props.flagged,\n        [styles.questioned]: props.questioned,\n        [styles.clicked]: props.clicked,\n        [styles.mine]: props.clicked && props.mine,\n        [styles.end]: props.end\n      })}\n      onClick={Tag !== 'div' ? props.onClick : undefined}\n      onContextMenu={!props.clicked ? props.onFlag : undefined}\n      value={props.id}\n      data-value={props.id}\n      key={props.id}\n      style={image ? { backgroundImage: `url(${image})` } : undefined}\n    />\n  );\n};\n\nexport default Cell;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAT0lEQVR42mNgYGD4TwaGMP4TgVE0/SdCIwOqRkwJXBqwavqPww//R5omfBGKVRNMshoHjRFPhDRUY0tGZNlEtp9GUwQl+YnknEtWGUEqBgCfOaw1/D0TFAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAASUlEQVR42mNgYGD4TwZGcKoJ0CiaqonQCML/0W3CpxGm4T82m6px+OE/Nk34NODUNMRtwht6JMfTwKQIkvw0miIoyU+0TxGkYgAPeGy3U1240gAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAWklEQVR42t2SMQ7AIAwD/W8/3h0YKii4SZhgsJTldEpiAFAhbVAgHcQAiB5sgwPxtb0AFztoBjlgCR1ustdL/yndCAVNHCH97MSZyYF0Jl1oQuzcG38qNSKbB3/NoALNu9QgAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAASUlEQVR42mNgYGD4TwaGMP4TgVE0VROhkQFVI4SBTyMDpm0IDdU4/PAfmyZ8GnBqGuI24Q09kuOJ/imCZD+NpghK8hPtUwSpGACCn6ACoxe3NgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAW0lEQVR42uWUOw4AIAhDuXcPXwcHIkF+ow6NwfBsUFBEhANpgGQ9IBZAk7eDCHRydIOXGvgbFD2oC9kT6TjQdgQLOjoCUyd0a0ICureXOfEBp9I8YTK5oz+iqwUjhY35eHHgggAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAWklEQVR42tWSSQrAMAwD9W89fkrpKab1EnrJQWAIw6DYksRGnoFGFogGeL87QhkYgBXio4MzE0n5U02amsZ72roIN01Ek4tORMgFyBtUmTjclH03v+xpfBHTXH/NoALFMh2nAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAUklEQVR42uWSwQoAIAhD9999/IvolJBm0SE6DAR5jDkliQ31gQUNEAtg2xcLeaABRohJhuI54YR/1UlZp3RPVz+CbCZmEAHwDaTg3Bz3tPURWVX6Rq8pbI7sgQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAU0lEQVR42mNgYGD4TwaGMP4TgVE0VROhkQFVI4SBTyMDpm0IDdU4/PAfmyZ8GnBqGuI24Q09bLZWo2lEsQmfhmpsyYhsm8j202iKIBDsA5wiSMUAOd99T+GP8TIAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAQklEQVR42mNgYGD4TwaGMP4TgVE0/SdCIwOqRkwJXBqwavqPww//R5omfBGKVRPJ8TQwKYIkP42mCEryE31SBKkYANgvvlDAiYGMAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAUUlEQVR42mNgYGD4TwaGMP4TgVE0/SdCIwOqRkwJXBqwavqPww//R5omfBGKVRPJ8URWiqgm16ZqUv1UTUAj1tAjZNP/IW4T0fmpmm4pglQMAF22ryk/sMoKAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAASElEQVR42mNgYGD4TwZGcKoJ0CiaqonQiMbGLYlDA6pN1Tj8UE2MTfg0jgib/uPBWG36TwSmjk2j8UQtm0jKTyTnXJLLCFIxAO0rYITcR7oGAAAAAElFTkSuQmCC\"","import React from 'react';\nimport * as digits from './images/digits';\nimport styles from './_game.module.scss';\n\nconst Counter = props => (\n  <div className={styles.counter}>\n    {props.value\n      .toString()\n      .padStart(3, '0')\n      .split('')\n      .map((v, idx) => (\n        <img key={idx} src={digits[`digit${+v}`] || digits.digit_} alt={v} />\n      ))}\n  </div>\n);\n\nexport default Counter;\n","import React from 'react';\nimport styles from './_game.module.scss';\nimport Counter from './Counter';\n\nlet timeTracker = 0;\n\nconst Timer = props => {\n  const [time, updateTime] = React.useState(0);\n\n  React.useEffect(() => {\n    if (props.status === 'NEW') {\n      timeTracker = 0;\n      updateTime(timeTracker);\n    }\n    const x = window.setInterval(() => {\n      if (props.status === 'ACTIVE') {\n        timeTracker = timeTracker + 1;\n        updateTime(timeTracker);\n      }\n    }, 1000);\n    return () => {\n      window.clearInterval(x);\n    };\n  }, [props.status]);\n  return <Counter value={time % 1000} />;\n};\n\nconst Status = props => (\n  <div className={styles.status}>\n    <Counter value={props.totalMines - props.numberFlagged} />\n    <button className=\"\" onClick={props.newGame} type=\"button\" />\n    <Timer status={props.gameState} />\n  </div>\n);\n\nexport default Status;\n","import React, { useState, useEffect } from 'react';\nimport cx from 'classnames';\nimport Cell from './Cell';\nimport styles from './_game.module.scss';\nimport Status from './Status';\n\nconst STATES = {\n  NEW: 'NEW',\n  ACTIVE: 'ACTIVE',\n  SUCCESS: 'SUCCESS',\n  FAILURE: 'FAILURE'\n};\n\nconst getRelativePositionsOfSurroundingCells = (gridSize, idx) => {\n  const gridColSize = gridSize[0];\n  const surroundingCells = [idx - gridColSize, idx + gridColSize];\n  const leftSide = [idx - gridColSize - 1, idx - 1, idx + gridColSize - 1];\n  const rightSide = [idx - gridColSize + 1, idx + 1, idx + gridColSize + 1];\n\n  const onLeftColumn = idx % gridColSize === 0;\n  const onRightColumn = idx % gridColSize === gridColSize - 1;\n\n  if (!onLeftColumn && !onRightColumn) {\n    surroundingCells.push(...leftSide, ...rightSide);\n  } else if (!onLeftColumn) {\n    surroundingCells.push(...leftSide);\n  } else if (!onRightColumn) {\n    surroundingCells.push(...rightSide);\n  }\n  return surroundingCells.filter(\n    index => index > -1 && index < gridSize[0] * gridSize[1]\n  );\n};\n\nconst setMines = (gridSize, minesCount, initialCell) => {\n  const mines = [];\n  for (let i = 0; i < minesCount; i += 1) {\n    let nextMineIdx = -1;\n    while (nextMineIdx === -1) {\n      const suggestedIdx = Math.floor(\n        Math.random() * gridSize[0] * gridSize[1]\n      );\n      if (!mines.includes(suggestedIdx) && suggestedIdx !== initialCell) {\n        nextMineIdx = suggestedIdx;\n      }\n    }\n    mines.push(nextMineIdx);\n  }\n  return mines;\n};\n\nconst initialize = (gridSize, mines, initialCell) => {\n  const mineIndex = setMines(gridSize, mines, initialCell);\n  return new Array(gridSize[0] * gridSize[1])\n    .fill({\n      clicked: false,\n      flagged: false\n    })\n    .map((entry, idx) => {\n      const surroundingCells = getRelativePositionsOfSurroundingCells(\n        gridSize,\n        idx\n      );\n      let warningCount = 0;\n      surroundingCells.forEach(val => {\n        if (mineIndex.includes(val)) {\n          warningCount += 1;\n        }\n      });\n      return {\n        ...entry,\n        isMine: mineIndex.includes(idx),\n        warningCount\n      };\n    });\n};\n\nconst clickEvent = (state, gridSize, clickedIndex) => {\n  const surroundingCellIndexes = getRelativePositionsOfSurroundingCells(\n    gridSize,\n    clickedIndex\n  );\n  if (clickedIndex > state.length - 1) {\n    return state;\n  }\n\n  state[clickedIndex].clicked = true;\n\n  surroundingCellIndexes.forEach(idx => {\n    if (!state[idx] || state[idx].isMine || state[idx].clicked) {\n      return;\n    }\n    if (!state[idx].warningCount) {\n      clickEvent(state, gridSize, idx);\n    } else {\n      state[idx].clicked = true;\n    }\n  });\n\n  return state;\n};\n\nconst onClickCell = (state, gridSize, clickedIndex) => {\n  const stateCopy = JSON.parse(JSON.stringify(state));\n  return clickEvent(stateCopy, gridSize, clickedIndex);\n};\n\nconst Grid = props => {\n  const [boardState, updateBoard] = useState(new Array(props.gridSize[0]*props.gridSize[1]).fill({}));\n  const [flagged, updateFlagged] = useState([]);\n  const [questioned, updateQuestioned] = useState([]);\n  const [gameState, updateGameState] = useState(STATES.NEW);\n  const [isInitialized, setInitialize] = useState(false);\n\n  const restart = () => {\n    updateBoard(new Array(props.gridSize[0]*props.gridSize[1]).fill({}));\n    updateFlagged([]);\n    updateQuestioned([]);\n    updateGameState(STATES.NEW);\n    setInitialize(false);\n  };\n\n  useEffect(() => {\n    const remaining = boardState.filter(cell => !cell.clicked).length;\n    if (remaining === 0) {\n      updateGameState(STATES.FAILURE);\n    } else if (remaining === props.mines) {\n      updateGameState(STATES.SUCCESS);\n    }\n  }, boardState);\n\n  useEffect(restart, [props.gameId]);\n\n  const onClick = e => {\n    let board = boardState;\n    if (!isInitialized) {\n      board = initialize(props.gridSize, props.mines, +e.target.dataset.value)\n      updateBoard(boardState)\n      setInitialize(true);\n    }\n    const value = +e.target.dataset.value;\n    if (gameState === STATES.NEW) {\n      updateGameState(STATES.ACTIVE);\n    }\n    if (board[value].isMine) {\n      const updatedBoard = board.map(val => ({ ...val, clicked: true }));\n      updatedBoard[value].end = true;\n      updateGameState(STATES.FAILURE);\n      updateBoard(updatedBoard);\n      return;\n    }\n    const x = onClickCell(board, props.gridSize, value);\n    updateBoard(x);\n  };\n\n  const onFlag = e => {\n    const value = +e.target.dataset.value;\n    e.preventDefault();\n    e.stopPropagation();\n    const alreadyFlagged = flagged.includes(value);\n    const alreadyQuestioned = questioned.includes(value);\n    if (alreadyQuestioned) {\n      updateQuestioned(questioned.filter(val => val !== value));\n      return;\n    }\n    if (alreadyFlagged) {\n      updateFlagged(flagged.filter(val => val !== value));\n      updateQuestioned([...questioned, value]);\n      return;\n    }\n    updateFlagged([...flagged, value]);\n  };\n\n  return (\n    <div\n      className={cx(styles.minesweeper, {\n        [styles.win]: gameState === STATES.SUCCESS,\n        [styles.lose]: gameState === STATES.FAILURE\n      })}\n    >\n      <Status\n        totalMines={props.mines}\n        numberFlagged={flagged.length}\n        newGame={restart}\n        gameState={gameState}\n      />\n      <div className={styles.board}>\n        <div\n          className={styles.grid}\n          style={{\n            gridTemplateColumns: `repeat(${props.gridSize[0]}, 16px)`\n          }}\n        >\n          {boardState.map((cell, idx) => (\n            <Cell\n              key={idx}\n              mine={cell.isMine}\n              clicked={cell.clicked}\n              end={cell.end}\n              flagged={flagged.includes(idx)}\n              questioned={questioned.includes(idx)}\n              warningCount={cell.warningCount}\n              gameOver={[STATES.SUCCESS, STATES.FAILURE].includes(gameState)}\n              onClick={onClick}\n              onFlag={onFlag}\n              id={idx}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nGrid.defaultProps = {\n  gridSize: [9, 9],\n  mines: 10\n};\n\nexport default Grid;\n","import React from 'react';\nimport Game from './Game/Game';\n\nconst App = props => {\n  return (\n    <Game gameId={props.id} gridSize={props.gridSize} mines={props.mines} />\n  );\n};\n\nApp.defaultProps = {\n  gameId: 1, // to trigger restart\n  gridSize: [9, 9], // @todo needs to be an array\n  mines: 11\n};\n\nexport default App;\n"],"names":["Cell","props","Tag","image","clicked","flagged","questioned","end","images","gameOver","mine","warningCount","cx","styles","cell","className","onClick","undefined","onFlag","id","backgroundImage","Counter","counter","value","toString","padStart","split","map","v","idx","digits","timeTracker","Timer","React","useState","time","updateTime","useEffect","status","x","window","setInterval","clearInterval","Status","totalMines","numberFlagged","newGame","gameState","STATES","NEW","ACTIVE","SUCCESS","FAILURE","getRelativePositionsOfSurroundingCells","gridSize","gridColSize","surroundingCells","leftSide","rightSide","onLeftColumn","onRightColumn","push","filter","index","setMines","minesCount","initialCell","mines","i","nextMineIdx","suggestedIdx","Math","floor","random","includes","initialize","mineIndex","Array","fill","entry","forEach","val","isMine","clickEvent","state","clickedIndex","surroundingCellIndexes","length","onClickCell","stateCopy","JSON","parse","stringify","Grid","boardState","updateBoard","updateFlagged","updateQuestioned","updateGameState","isInitialized","setInitialize","restart","remaining","gameId","e","board","target","dataset","updatedBoard","preventDefault","stopPropagation","alreadyFlagged","alreadyQuestioned","minesweeper","win","lose","grid","gridTemplateColumns","defaultProps","App","Game"],"mappings":"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"}