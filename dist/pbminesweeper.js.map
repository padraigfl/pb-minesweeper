{"version":3,"file":"pbminesweeper.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/Game/images/open1.png","../src/Game/images/open2.png","../src/Game/images/open3.png","../src/Game/images/open4.png","../src/Game/images/open5.png","../src/Game/images/open6.png","../src/Game/images/open7.png","../src/Game/images/open8.png","../src/Game/images/question.png","../src/Game/images/flag.png","../src/Game/images/misflagged.png","../src/Game/images/mine-death.png","../src/Game/images/mine-ceil.png","../src/Game/Cell.js","../src/Game/images/digit0.png","../src/Game/images/digit1.png","../src/Game/images/digit2.png","../src/Game/images/digit3.png","../src/Game/images/digit4.png","../src/Game/images/digit5.png","../src/Game/images/digit6.png","../src/Game/images/digit7.png","../src/Game/images/digit8.png","../src/Game/images/digit9.png","../src/Game/images/digit-.png","../src/Game/Counter.js","../src/Game/Status.js","../src/Game/Game.js","../src/App.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK0lEQVR42mNgGAng/38IpkgzWQYgaybZAHTNA+OFIW4AtkAkySCKDRhKAAB8jU+x6ZwbNAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAL0lEQVR42mNgGIagmuE/XkyRZoKG4FNEtCvIMZwkb1EUmLTVSJFzaRKNZCemIQcA2OFf+6sS8JAAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK0lEQVR42mNgGF7gPxARwhQbQNAQYgynjwEUO5+q/qdfGFAcjTRLA4MbAACQL3uF13XmMAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAJ0lEQVR42mNgGK6g+j8CY+PT1gBsiulnALJCfJh2BpDirZFmwGAGAE2EUrFtzr/cAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAJklEQVR42mNgGF6gmoHhPzGYPgZQ7AWahQFtA5Fu3hvYdMAw/AAAgjlnXUQq77YAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKklEQVR42mNgGIaguvo/XkyRZpIMoNj5NPE/VcIAryH4FNHfAJqFw/ADANeOjOlonwSHAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHklEQVR42mNgGHbgP5GYdgYQazj9DRi1fSCjbggAADl0K9Xj0B5TAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALElEQVR42mNgGH6gurr6Pz5MkWaChuBTRB8DKA4DqgbiwIQBxdFIlUAcegAAKVC5Qc8U50QAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALElEQVR42mNgGNbgPxomSzMuPu0NIGTgENFMFQOolhYGuxf27t37f2A0AwEAQr8eVaRMnxsAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAL0lEQVR42mNgGN7gPxD9B1NkaiTLAHTN9HcBVcIA05wBMuA/GiZbI8kGUWzAEAMA9m03yW7foZAAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVklEQVR42tVSQQ4AIAjy/5+mdfBQoTJbh9g8BaSi2Q+AygI4GTJ3ewCp7KPD5KhS7B5OnCBiKEtbBKSrWMhajkYqjRKDNyOkSagJ3MUYENC5wt4pdzAAjVmTbVcYf78AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAQ0lEQVR42mNgoAb4D0TkYoIGMNDdAAYkGh1jMxCrCxjwYKJcAFYIBYQMoZ4BDGRgvC4gNhyobwBVYoHidDCwSZlUDABNhnuTt8N6swAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAN0lEQVR42mNgGArgP90N+I9Eo2OiDfyPBxOnGQbIMYRsA/6Tgck2iOwA/E+3WKA4HQxsUiYJAAAf1lyk4ulhiwAAAABJRU5ErkJggg==\"","import React from 'react';\nimport cx from 'classnames';\nimport styles from './_game.module.scss';\nimport * as images from './images/board';\n\nconst Cell = props => {\n  let Tag = 'button';\n  let image;\n  if (props.clicked || props.flagged || props.questioned) {\n    Tag = 'div';\n  }\n\n  if (props.end) {\n    image = images.mineDeath;\n  } else if (props.flagged && props.gameOver) {\n    image = images.misflag;\n  } else if (props.flagged) {\n    image = images.flag;\n  } else if (props.questioned) {\n    image = images.question;\n  } else if (props.gameOver && props.mine) {\n    image = images.mine;\n  } else if (props.clicked && props.warningCount && !props.mine) {\n    image = images[`warning${props.warningCount}`];\n  }\n\n  return (\n    <Tag\n      className={cx(styles.cell, props.className, {\n        [styles.flagged]: props.flagged,\n        [styles.questioned]: props.questioned,\n        [styles.clicked]: props.clicked,\n        [styles.mine]: props.clicked && props.mine,\n        [styles.end]: props.end\n      })}\n      onClick={Tag !== 'div' ? props.onClick : undefined}\n      onContextMenu={!props.clicked ? props.onFlag : undefined}\n      value={props.id}\n      data-value={props.id}\n      key={props.id}\n      style={image ? { backgroundImage: `url(${image})` } : undefined}\n    />\n  );\n};\n\nexport default Cell;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAT0lEQVR42mNgYGD4TwaGMP4TgVE0/SdCIwOqRkwJXBqwavqPww//R5omfBGKVRNMshoHjRFPhDRUY0tGZNlEtp9GUwQl+YnknEtWGUEqBgCfOaw1/D0TFAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAASUlEQVR42mNgYGD4TwZGcKoJ0CiaqonQCML/0W3CpxGm4T82m6px+OE/Nk34NODUNMRtwht6JMfTwKQIkvw0miIoyU+0TxGkYgAPeGy3U1240gAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAWklEQVR42t2SMQ7AIAwD/W8/3h0YKii4SZhgsJTldEpiAFAhbVAgHcQAiB5sgwPxtb0AFztoBjlgCR1ustdL/yndCAVNHCH97MSZyYF0Jl1oQuzcG38qNSKbB3/NoALNu9QgAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAASUlEQVR42mNgYGD4TwaGMP4TgVE0VROhkQFVI4SBTyMDpm0IDdU4/PAfmyZ8GnBqGuI24Q09kuOJ/imCZD+NpghK8hPtUwSpGACCn6ACoxe3NgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAW0lEQVR42uWUOw4AIAhDuXcPXwcHIkF+ow6NwfBsUFBEhANpgGQ9IBZAk7eDCHRydIOXGvgbFD2oC9kT6TjQdgQLOjoCUyd0a0ICureXOfEBp9I8YTK5oz+iqwUjhY35eHHgggAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAWklEQVR42tWSSQrAMAwD9W89fkrpKab1EnrJQWAIw6DYksRGnoFGFogGeL87QhkYgBXio4MzE0n5U02amsZ72roIN01Ek4tORMgFyBtUmTjclH03v+xpfBHTXH/NoALFMh2nAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAUklEQVR42uWSwQoAIAhD9999/IvolJBm0SE6DAR5jDkliQ31gQUNEAtg2xcLeaABRohJhuI54YR/1UlZp3RPVz+CbCZmEAHwDaTg3Bz3tPURWVX6Rq8pbI7sgQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAU0lEQVR42mNgYGD4TwaGMP4TgVE0VROhkQFVI4SBTyMDpm0IDdU4/PAfmyZ8GnBqGuI24Q09bLZWo2lEsQmfhmpsyYhsm8j202iKIBDsA5wiSMUAOd99T+GP8TIAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAQklEQVR42mNgYGD4TwaGMP4TgVE0/SdCIwOqRkwJXBqwavqPww//R5omfBGKVRPJ8TQwKYIkP42mCEryE31SBKkYANgvvlDAiYGMAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAUUlEQVR42mNgYGD4TwaGMP4TgVE0/SdCIwOqRkwJXBqwavqPww//R5omfBGKVRPJ8URWiqgm16ZqUv1UTUAj1tAjZNP/IW4T0fmpmm4pglQMAF22ryk/sMoKAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAASElEQVR42mNgYGD4TwZGcKoJ0CiaqonQiMbGLYlDA6pN1Tj8UE2MTfg0jgib/uPBWG36TwSmjk2j8UQtm0jKTyTnXJLLCFIxAO0rYITcR7oGAAAAAElFTkSuQmCC\"","import React from 'react';\nimport * as digits from './images/digits';\nimport styles from './_game.module.scss';\n\nconst Counter = props => (\n  <div className={styles.counter}>\n    {props.value\n      .toString()\n      .padStart(3, '0')\n      .split('')\n      .map((v, idx) => (\n        <img key={idx} src={digits[`digit${+v}`] || digits.digit_} alt={v} />\n      ))}\n  </div>\n);\n\nexport default Counter;\n","import React from 'react';\nimport styles from './_game.module.scss';\nimport Counter from './Counter';\n\nconst Status = props => (\n  <div className={styles.status}>\n    <Counter value={props.totalMines - props.numberFlagged} />\n    <button className=\"\" onClick={props.newGame} type=\"button\" />\n    <Counter value={props.totalMoves} />\n  </div>\n);\n\nexport default Status;\n","import React, { useState, useEffect } from 'react';\nimport cx from 'classnames';\nimport Cell from './Cell';\nimport styles from './_game.module.scss';\nimport Status from './Status';\n\nconst getRelativePositionsOfSurroundingCells = (gridSize, idx) => {\n  const gridColSize = gridSize[0];\n  const surroundingCells = [idx - gridColSize, idx + gridColSize];\n  const leftSide = [idx - gridColSize - 1, idx - 1, idx + gridColSize - 1];\n  const rightSide = [idx - gridColSize + 1, idx + 1, idx + gridColSize + 1];\n\n  const onLeftColumn = idx % gridColSize === 0;\n  const onRightColumn = idx % gridColSize === gridColSize - 1;\n\n  if (!onLeftColumn && !onRightColumn) {\n    surroundingCells.push(...leftSide, ...rightSide);\n  } else if (!onLeftColumn) {\n    surroundingCells.push(...leftSide);\n  } else if (!onRightColumn) {\n    surroundingCells.push(...rightSide);\n  }\n  return surroundingCells.filter(\n    index => index > -1 && index < gridSize[0] * gridSize[1]\n  );\n};\n\nconst setMines = (gridSize, minesCount) => {\n  const mines = [];\n  for (let i = 0; i < minesCount; i += 1) {\n    let nextMineIdx = -1;\n    while (nextMineIdx === -1) {\n      const suggestedIdx = Math.floor(\n        Math.random() * gridSize[0] * gridSize[1]\n      );\n      if (!mines.includes(suggestedIdx)) {\n        nextMineIdx = suggestedIdx;\n      }\n    }\n    mines.push(nextMineIdx);\n  }\n  return mines;\n};\n\nconst initialize = (gridSize, mines) => {\n  const mineIndex = setMines(gridSize, mines);\n  return new Array(gridSize[0] * gridSize[1])\n    .fill({\n      clicked: false,\n      flagged: false\n    })\n    .map((entry, idx) => {\n      const surroundingCells = getRelativePositionsOfSurroundingCells(\n        gridSize,\n        idx\n      );\n      let warningCount = 0;\n      surroundingCells.forEach(val => {\n        if (mineIndex.includes(val)) {\n          warningCount += 1;\n        }\n      });\n      return {\n        ...entry,\n        isMine: mineIndex.includes(idx),\n        warningCount\n      };\n    });\n};\n\nconst clickEvent = (state, gridSize, clickedIndex) => {\n  const surroundingCellIndexes = getRelativePositionsOfSurroundingCells(\n    gridSize,\n    clickedIndex\n  );\n  if (clickedIndex > state.length - 1) {\n    return state;\n  }\n\n  state[clickedIndex].clicked = true;\n\n  surroundingCellIndexes.forEach(idx => {\n    if (!state[idx] || state[idx].isMine || state[idx].clicked) {\n      return;\n    }\n    if (!state[idx].warningCount) {\n      clickEvent(state, gridSize, idx);\n    } else {\n      state[idx].clicked = true;\n    }\n  });\n\n  return state;\n};\n\nconst onClickCell = (state, gridSize, clickedIndex) => {\n  const stateCopy = JSON.parse(JSON.stringify(state));\n  return clickEvent(stateCopy, gridSize, clickedIndex);\n};\n\nconst Grid = props => {\n  const [boardState, updateBoard] = useState(\n    initialize(props.gridSize, props.mines)\n  );\n  const [flagged, updateFlagged] = useState([]);\n  const [questioned, updateQuestioned] = useState([]);\n  const [movesCount, updateMovesCount] = useState(0);\n  const [endState, setEndState] = useState(null);\n\n  const restart = () => {\n    updateBoard(initialize(props.gridSize, props.mines));\n    updateFlagged([]);\n    updateQuestioned([]);\n    updateMovesCount(0);\n    setEndState(null);\n  };\n\n  useEffect(() => {\n    const remaining = boardState.filter(cell => !cell.clicked).length;\n    if (remaining === 0) {\n      setEndState({ lose: true });\n    } else if (remaining === props.mines) {\n      setEndState({ win: true });\n    }\n  }, boardState);\n\n  useEffect(restart, [props.gameId]);\n\n  const onClick = e => {\n    const value = +e.target.dataset.value;\n    updateMovesCount(movesCount + 1);\n    if (boardState[value].isMine) {\n      const updatedBoard = boardState.map(val => ({ ...val, clicked: true }));\n      updatedBoard[value].end = true;\n      updateBoard(updatedBoard);\n      return;\n    }\n    const x = onClickCell(boardState, props.gridSize, value);\n    updateBoard(x);\n  };\n\n  const onFlag = e => {\n    const value = +e.target.dataset.value;\n    e.preventDefault();\n    e.stopPropagation();\n    const alreadyFlagged = flagged.includes(value);\n    const alreadyQuestioned = questioned.includes(value);\n    if (alreadyQuestioned) {\n      updateQuestioned(questioned.filter(val => val !== value));\n      return;\n    }\n    if (alreadyFlagged) {\n      updateFlagged(flagged.filter(val => val !== value));\n      updateQuestioned([...questioned, value]);\n      return;\n    }\n    updateFlagged([...flagged, value]);\n  };\n\n  return (\n    <div\n      className={cx(styles.minesweeper, {\n        [styles.win]: endState && endState.win,\n        [styles.lose]: endState && endState.lose\n      })}\n    >\n      <Status\n        totalMines={props.mines}\n        numberFlagged={flagged.length}\n        newGame={restart}\n        totalMoves={movesCount}\n        endState={endState}\n      />\n      <div className={styles.board}>\n        <div\n          className={styles.grid}\n          style={{\n            gridTemplateColumns: `repeat(${props.gridSize[0]}, 16px)`\n          }}\n        >\n          {boardState.map((cell, idx) => (\n            <Cell\n              mine={cell.isMine}\n              clicked={cell.clicked}\n              end={cell.end}\n              flagged={flagged.includes(idx)}\n              questioned={questioned.includes(idx)}\n              warningCount={cell.warningCount}\n              gameOver={endState}\n              onClick={onClick}\n              onFlag={onFlag}\n              id={idx}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nGrid.defaultProps = {\n  gridSize: [9, 9],\n  mines: 10\n};\n\nexport default Grid;\n","import React from 'react';\nimport Game from './Game/Game';\n\nconst App = props => {\n  return (\n    <Game gameId={props.id} gridSize={props.gridSize} mines={props.mines} />\n  );\n};\n\nApp.defaultProps = {\n  gameId: 1, // to trigger restart\n  gridSize: [9, 9], // @todo needs to be an array\n  mines: 11\n};\n\nexport default App;\n"],"names":["Cell","props","Tag","image","clicked","flagged","questioned","end","images","gameOver","mine","warningCount","React","cx","styles","cell","className","onClick","undefined","onFlag","id","backgroundImage","Counter","counter","value","toString","padStart","split","map","v","idx","digits","Status","status","totalMines","numberFlagged","newGame","totalMoves","getRelativePositionsOfSurroundingCells","gridSize","gridColSize","surroundingCells","leftSide","rightSide","onLeftColumn","onRightColumn","push","filter","index","setMines","minesCount","mines","i","nextMineIdx","suggestedIdx","Math","floor","random","includes","initialize","mineIndex","Array","fill","entry","forEach","val","isMine","clickEvent","state","clickedIndex","surroundingCellIndexes","length","onClickCell","stateCopy","JSON","parse","stringify","Grid","useState","boardState","updateBoard","updateFlagged","updateQuestioned","movesCount","updateMovesCount","endState","setEndState","restart","useEffect","remaining","lose","win","gameId","e","target","dataset","updatedBoard","x","preventDefault","stopPropagation","alreadyFlagged","alreadyQuestioned","minesweeper","board","grid","gridTemplateColumns","defaultProps","App","Game"],"mappings":"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"}