{"version":3,"file":"pbminesweeper.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/Game/images/open1.png","../src/Game/images/open2.png","../src/Game/images/open3.png","../src/Game/images/open4.png","../src/Game/images/open5.png","../src/Game/images/open6.png","../src/Game/images/open7.png","../src/Game/images/open8.png","../src/Game/images/question.png","../src/Game/images/flag.png","../src/Game/images/misflagged.png","../src/Game/images/mine-death.png","../src/Game/images/mine-ceil.png","../src/Game/Cell.js","../src/Game/images/digit0.png","../src/Game/images/digit1.png","../src/Game/images/digit2.png","../src/Game/images/digit3.png","../src/Game/images/digit4.png","../src/Game/images/digit5.png","../src/Game/images/digit6.png","../src/Game/images/digit7.png","../src/Game/images/digit8.png","../src/Game/images/digit9.png","../src/Game/images/digit-.png","../src/Game/Counter.js","../src/Game/Status.js","../src/Game/Game.js","../src/App.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK0lEQVR42mNgGAng/38IpkgzWQYgaybZAHTNA+OFIW4AtkAkySCKDRhKAAB8jU+x6ZwbNAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAL0lEQVR42mNgGIagmuE/XkyRZoKG4FNEtCvIMZwkb1EUmLTVSJFzaRKNZCemIQcA2OFf+6sS8JAAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK0lEQVR42mNgGF7gPxARwhQbQNAQYgynjwEUO5+q/qdfGFAcjTRLA4MbAACQL3uF13XmMAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAJ0lEQVR42mNgGK6g+j8CY+PT1gBsiulnALJCfJh2BpDirZFmwGAGAE2EUrFtzr/cAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAJklEQVR42mNgGF6gmoHhPzGYPgZQ7AWahQFtA5Fu3hvYdMAw/AAAgjlnXUQq77YAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKklEQVR42mNgGIaguvo/XkyRZpIMoNj5NPE/VcIAryH4FNHfAJqFw/ADANeOjOlonwSHAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHklEQVR42mNgGHbgP5GYdgYQazj9DRi1fSCjbggAADl0K9Xj0B5TAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALElEQVR42mNgGH6gurr6Pz5MkWaChuBTRB8DKA4DqgbiwIQBxdFIlUAcegAAKVC5Qc8U50QAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALElEQVR42mNgGNbgPxomSzMuPu0NIGTgENFMFQOolhYGuxf27t37f2A0AwEAQr8eVaRMnxsAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAL0lEQVR42mNgGN7gPxD9B1NkaiTLAHTN9HcBVcIA05wBMuA/GiZbI8kGUWzAEAMA9m03yW7foZAAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAVklEQVR42tVSQQ4AIAjy/5+mdfBQoTJbh9g8BaSi2Q+AygI4GTJ3ewCp7KPD5KhS7B5OnCBiKEtbBKSrWMhajkYqjRKDNyOkSagJ3MUYENC5wt4pdzAAjVmTbVcYf78AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAQ0lEQVR42mNgoAb4D0TkYoIGMNDdAAYkGh1jMxCrCxjwYKJcAFYIBYQMoZ4BDGRgvC4gNhyobwBVYoHidDCwSZlUDABNhnuTt8N6swAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAN0lEQVR42mNgGArgP90N+I9Eo2OiDfyPBxOnGQbIMYRsA/6Tgck2iOwA/E+3WKA4HQxsUiYJAAAf1lyk4ulhiwAAAABJRU5ErkJggg==\"","import React from 'react';\nimport cx from 'classnames';\nimport styles from './_game.module.scss';\nimport * as images from './images/board';\n\nconst Cell = props => {\n  let Tag = 'button';\n  let image;\n  if (props.clicked || props.flagged || props.questioned) {\n    Tag = 'div';\n  }\n\n  if (props.end) {\n    image = images.mineDeath;\n  } else if (props.flagged && props.gameOver) {\n    image = images.misflag;\n  } else if (props.flagged) {\n    image = images.flag;\n  } else if (props.questioned) {\n    image = images.question;\n  } else if (props.gameOver && props.mine) {\n    image = images.mine;\n  } else if (props.clicked && props.warningCount && !props.mine) {\n    image = images[`warning${props.warningCount}`];\n  }\n\n  return (\n    <Tag\n      className={cx(styles.cell, props.className, {\n        [styles.flagged]: props.flagged,\n        [styles.questioned]: props.questioned,\n        [styles.clicked]: props.clicked,\n        [styles.mine]: props.clicked && props.mine,\n        [styles.end]: props.end\n      })}\n      onClick={Tag !== 'div' ? props.onClick : undefined}\n      onContextMenu={!props.clicked ? props.onFlag : undefined}\n      value={props.id}\n      data-value={props.id}\n      key={props.id}\n      style={image ? { backgroundImage: `url(${image})` } : undefined}\n    />\n  );\n};\n\nexport default Cell;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAT0lEQVR42mNgYGD4TwaGMP4TgVE0/SdCIwOqRkwJXBqwavqPww//R5omfBGKVRNMshoHjRFPhDRUY0tGZNlEtp9GUwQl+YnknEtWGUEqBgCfOaw1/D0TFAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAASUlEQVR42mNgYGD4TwZGcKoJ0CiaqonQCML/0W3CpxGm4T82m6px+OE/Nk34NODUNMRtwht6JMfTwKQIkvw0miIoyU+0TxGkYgAPeGy3U1240gAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAWklEQVR42t2SMQ7AIAwD/W8/3h0YKii4SZhgsJTldEpiAFAhbVAgHcQAiB5sgwPxtb0AFztoBjlgCR1ustdL/yndCAVNHCH97MSZyYF0Jl1oQuzcG38qNSKbB3/NoALNu9QgAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAASUlEQVR42mNgYGD4TwaGMP4TgVE0VROhkQFVI4SBTyMDpm0IDdU4/PAfmyZ8GnBqGuI24Q09kuOJ/imCZD+NpghK8hPtUwSpGACCn6ACoxe3NgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAW0lEQVR42uWUOw4AIAhDuXcPXwcHIkF+ow6NwfBsUFBEhANpgGQ9IBZAk7eDCHRydIOXGvgbFD2oC9kT6TjQdgQLOjoCUyd0a0ICureXOfEBp9I8YTK5oz+iqwUjhY35eHHgggAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAWklEQVR42tWSSQrAMAwD9W89fkrpKab1EnrJQWAIw6DYksRGnoFGFogGeL87QhkYgBXio4MzE0n5U02amsZ72roIN01Ek4tORMgFyBtUmTjclH03v+xpfBHTXH/NoALFMh2nAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAUklEQVR42uWSwQoAIAhD9999/IvolJBm0SE6DAR5jDkliQ31gQUNEAtg2xcLeaABRohJhuI54YR/1UlZp3RPVz+CbCZmEAHwDaTg3Bz3tPURWVX6Rq8pbI7sgQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAU0lEQVR42mNgYGD4TwaGMP4TgVE0VROhkQFVI4SBTyMDpm0IDdU4/PAfmyZ8GnBqGuI24Q09bLZWo2lEsQmfhmpsyYhsm8j202iKIBDsA5wiSMUAOd99T+GP8TIAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAQklEQVR42mNgYGD4TwaGMP4TgVE0/SdCIwOqRkwJXBqwavqPww//R5omfBGKVRPJ8TQwKYIkP42mCEryE31SBKkYANgvvlDAiYGMAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAAUUlEQVR42mNgYGD4TwaGMP4TgVE0/SdCIwOqRkwJXBqwavqPww//R5omfBGKVRPJ8URWiqgm16ZqUv1UTUAj1tAjZNP/IW4T0fmpmm4pglQMAF22ryk/sMoKAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAXCAYAAADQpsWBAAAASElEQVR42mNgYGD4TwZGcKoJ0CiaqonQiMbGLYlDA6pN1Tj8UE2MTfg0jgib/uPBWG36TwSmjk2j8UQtm0jKTyTnXJLLCFIxAO0rYITcR7oGAAAAAElFTkSuQmCC\"","import React from 'react';\nimport * as digits from './images/digits';\nimport styles from './_game.module.scss';\n\nconst Counter = props => (\n  <div className={styles.counter}>\n    {props.value\n      .toString()\n      .padStart(3, '0')\n      .split('')\n      .map((v, idx) => (\n        <img key={idx} src={digits[`digit${+v}`] || digits.digit_} alt={v} />\n      ))}\n  </div>\n);\n\nexport default Counter;\n","import React from 'react';\nimport styles from './_game.module.scss';\nimport Counter from './Counter';\n\nconst Status = props => (\n  <div className={styles.status}>\n    <Counter value={props.totalMines - props.numberFlagged} />\n    <button className=\"\" onClick={props.newGame} type=\"button\" />\n    <Counter value={props.totalMoves} />\n  </div>\n);\n\nexport default Status;\n","import React, { useState, useEffect } from 'react';\nimport cx from 'classnames';\nimport Cell from './Cell';\nimport styles from './_game.module.scss';\nimport Status from './Status';\n\nconst getRelativePositionsOfSurroundingCells = (gridSize, idx) => {\n  const surroundingCells = [idx - gridSize, idx + gridSize];\n  const leftSide = [idx - gridSize - 1, idx - 1, idx + gridSize - 1];\n  const rightSide = [idx - gridSize + 1, idx + 1, idx + gridSize + 1];\n\n  const onLeftColumn = idx % gridSize === 0;\n  const onRightColumn = idx % gridSize === gridSize - 1;\n\n  if (!onLeftColumn && !onRightColumn) {\n    surroundingCells.push(...leftSide, ...rightSide);\n  } else if (!onLeftColumn) {\n    surroundingCells.push(...leftSide);\n  } else if (!onRightColumn) {\n    surroundingCells.push(...rightSide);\n  }\n  return surroundingCells.filter(index => index > -1 && index < gridSize ** 2);\n};\n\nconst setMines = (gridSize, minesCount) => {\n  const mines = [];\n  for (let i = 0; i < minesCount; i += 1) {\n    let nextMineIdx = -1;\n    while (nextMineIdx === -1) {\n      const suggestedIdx = Math.floor(Math.random() * gridSize ** 2);\n      if (!mines.includes(suggestedIdx)) {\n        nextMineIdx = suggestedIdx;\n      }\n    }\n    mines.push(nextMineIdx);\n  }\n  return mines;\n};\n\nconst initialize = (gridSize, mines) => {\n  const mineIndex = setMines(gridSize, mines);\n  return new Array(gridSize ** 2)\n    .fill({\n      clicked: false,\n      flagged: false\n    })\n    .map((entry, idx) => {\n      const surroundingCells = getRelativePositionsOfSurroundingCells(\n        gridSize,\n        idx\n      );\n      let warningCount = 0;\n      surroundingCells.forEach(val => {\n        if (mineIndex.includes(val)) {\n          warningCount += 1;\n        }\n      });\n      return {\n        ...entry,\n        isMine: mineIndex.includes(idx),\n        warningCount\n      };\n    });\n};\n\nconst clickEvent = (state, clickedIndex) => {\n  console.log(clickedIndex);\n  const surroundingCellIndexes = getRelativePositionsOfSurroundingCells(\n    Math.sqrt(state.length),\n    clickedIndex\n  );\n  if (clickedIndex > state.length - 1) {\n    return state;\n  }\n\n  state[clickedIndex].clicked = true;\n\n  surroundingCellIndexes.forEach(idx => {\n    if (!state[idx] || state[idx].isMine || state[idx].clicked) {\n      return;\n    }\n    if (!state[idx].warningCount) {\n      clickEvent(state, idx);\n    } else {\n      state[idx].clicked = true;\n    }\n  });\n\n  return state;\n};\n\nconst onClickCell = (state, clickedIndex) => {\n  const stateCopy = JSON.parse(JSON.stringify(state));\n  return clickEvent(stateCopy, clickedIndex);\n};\n\nconst Grid = props => {\n  const [boardState, updateBoard] = useState(\n    initialize(props.gridSize, props.mines)\n  );\n  const [flagged, updateFlagged] = useState([]);\n  const [questioned, updateQuestioned] = useState([]);\n  const [movesCount, updateMovesCount] = useState(0);\n  const [endState, setEndState] = useState(null);\n\n  const restart = () => {\n    updateBoard(initialize(props.gridSize, props.mines));\n    updateFlagged([]);\n    updateQuestioned([]);\n    setEndState(null);\n  };\n\n  useEffect(() => {\n    const remaining = boardState.filter(cell => !cell.clicked).length;\n    if (remaining === 0) {\n      setEndState({ lose: true });\n    } else if (remaining === props.mines) {\n      setEndState({ win: true });\n    }\n  }, boardState);\n\n  useEffect(restart, [props.gameId]);\n\n  const onClick = e => {\n    const value = +e.target.dataset.value;\n    updateMovesCount(movesCount + 1);\n    if (boardState[value].isMine) {\n      const updatedBoard = boardState.map(val => ({ ...val, clicked: true }));\n      updatedBoard[value].end = true;\n      updateBoard(updatedBoard);\n      return;\n    }\n    const x = onClickCell(boardState, value);\n    updateBoard(x);\n  };\n\n  const onFlag = e => {\n    const value = +e.target.dataset.value;\n    e.preventDefault();\n    e.stopPropagation();\n    const alreadyFlagged = flagged.includes(value);\n    const alreadyQuestioned = questioned.includes(value);\n    if (alreadyQuestioned) {\n      updateQuestioned(questioned.filter(val => val !== value));\n      return;\n    }\n    if (alreadyFlagged) {\n      updateFlagged(flagged.filter(val => val !== value));\n      updateQuestioned([...questioned, value]);\n      return;\n    }\n    updateFlagged([...flagged, value]);\n  };\n\n  return (\n    <div\n      className={cx(styles.minesweeper, {\n        [styles.win]: endState && endState.win,\n        [styles.lose]: endState && endState.lose\n      })}\n    >\n      <Status\n        totalMines={props.mines}\n        numberFlagged={flagged.length}\n        newGame={restart}\n        totalMoves={movesCount}\n        endState={endState}\n      />\n      <div\n        className={styles.grid}\n        style={{\n          gridTemplateColumns: `repeat(${props.gridSize}, 1fr)`\n        }}\n      >\n        {boardState.map((cell, idx) => (\n          <Cell\n            mine={cell.isMine}\n            clicked={cell.clicked}\n            end={cell.end}\n            flagged={flagged.includes(idx)}\n            questioned={questioned.includes(idx)}\n            warningCount={cell.warningCount}\n            gameOver={endState}\n            onClick={onClick}\n            onFlag={onFlag}\n            id={idx}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nGrid.defaultProps = {\n  gridSize: 9,\n  mines: 10\n};\n\nexport default Grid;\n","import React from 'react';\nimport Game from './Game/Game';\n\nconst App = props => {\n  return (\n    <Game gameId={props.id} gridSize={props.gridSize} mines={props.mines} />\n  );\n};\n\nApp.defaultProps = {\n  gameId: 1, // to trigger restart\n  gridSize: 10, // @todo needs to be an array\n  mines: 11\n};\n\nexport default App;\n"],"names":["Cell","props","Tag","image","clicked","flagged","questioned","end","images","gameOver","mine","warningCount","React","cx","styles","cell","className","onClick","undefined","onFlag","id","backgroundImage","Counter","counter","value","toString","padStart","split","map","v","idx","digits","Status","status","totalMines","numberFlagged","newGame","totalMoves","getRelativePositionsOfSurroundingCells","gridSize","surroundingCells","leftSide","rightSide","onLeftColumn","onRightColumn","push","filter","index","setMines","minesCount","mines","i","nextMineIdx","suggestedIdx","Math","floor","random","includes","initialize","mineIndex","Array","fill","entry","forEach","val","isMine","clickEvent","state","clickedIndex","console","log","surroundingCellIndexes","sqrt","length","onClickCell","stateCopy","JSON","parse","stringify","Grid","useState","boardState","updateBoard","updateFlagged","updateQuestioned","movesCount","updateMovesCount","endState","setEndState","restart","useEffect","remaining","lose","win","gameId","e","target","dataset","updatedBoard","x","preventDefault","stopPropagation","alreadyFlagged","alreadyQuestioned","minesweeper","grid","gridTemplateColumns","defaultProps","App","Game"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,SAAS,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE;EAC/B,EAAE,KAAK,GAAG,KAAK,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;EACjC,EAAE,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;;EAE9B,EAAE,IAAI,CAAC,GAAG,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,EAAE,OAAO,EAAE;;EAE1D,EAAE,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;EACvE,EAAE,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;EAC9C,EAAE,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;;EAE1B,EAAE,IAAI,QAAQ,KAAK,KAAK,EAAE;EAC1B,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE;EACzB,MAAM,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;EAChD,KAAK,MAAM;EACX,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;EAC9B,KAAK;EACL,GAAG,MAAM;EACT,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;EAC5B,GAAG;;EAEH,EAAE,IAAI,KAAK,CAAC,UAAU,EAAE;EACxB,IAAI,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,GAAG,CAAC;EACnC,GAAG,MAAM;EACT,IAAI,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;EACpD,GAAG;EACH,CAAC;;;;;;ACzBD,cAAe;;ACAf,cAAe;;ACAf,cAAe;;ACAf,cAAe;;ACAf,cAAe;;ACAf,cAAe;;ACAf,cAAe;;ACAf,cAAe;;ACAf,iBAAe;;ACAf,aAAe;;ACAf,mBAAe;;ACAf,kBAAe;;ACAf,iBAAe;;iMAAgL;;;;;;;;;;;;;;;;;;ECK/L,IAAMA,IAAI,GAAG,SAAPA,IAAO,CAAAC,KAAK,EAAI;EAAA;;EACpB,MAAIC,GAAG,GAAG,QAAV;EACA,MAAIC,KAAJ;;EACA,MAAIF,KAAK,CAACG,OAAN,IAAiBH,KAAK,CAACI,OAAvB,IAAkCJ,KAAK,CAACK,UAA5C,EAAwD;EACtDJ,IAAAA,GAAG,GAAG,KAAN;EACD;;EAED,MAAID,KAAK,CAACM,GAAV,EAAe;EACbJ,IAAAA,KAAK,GAAGK,SAAR;EACD,GAFD,MAEO,IAAIP,KAAK,CAACI,OAAN,IAAiBJ,KAAK,CAACQ,QAA3B,EAAqC;EAC1CN,IAAAA,KAAK,GAAGK,UAAR;EACD,GAFM,MAEA,IAAIP,KAAK,CAACI,OAAV,EAAmB;EACxBF,IAAAA,KAAK,GAAGK,IAAR;EACD,GAFM,MAEA,IAAIP,KAAK,CAACK,UAAV,EAAsB;EAC3BH,IAAAA,KAAK,GAAGK,QAAR;EACD,GAFM,MAEA,IAAIP,KAAK,CAACQ,QAAN,IAAkBR,KAAK,CAACS,IAA5B,EAAkC;EACvCP,IAAAA,KAAK,GAAGK,QAAR;EACD,GAFM,MAEA,IAAIP,KAAK,CAACG,OAAN,IAAiBH,KAAK,CAACU,YAAvB,IAAuC,CAACV,KAAK,CAACS,IAAlD,EAAwD;EAC7DP,IAAAA,KAAK,GAAGK,MAAM,kBAAWP,KAAK,CAACU,YAAjB,EAAd;EACD;;EAED,SACEC,6BAAC,GAAD;EACE,IAAA,SAAS,EAAEC,EAAE,CAACC,MAAM,CAACC,IAAR,EAAcd,KAAK,CAACe,SAApB,kCACVF,MAAM,CAACT,OADG,EACOJ,KAAK,CAACI,OADb,wBAEVS,MAAM,CAACR,UAFG,EAEUL,KAAK,CAACK,UAFhB,wBAGVQ,MAAM,CAACV,OAHG,EAGOH,KAAK,CAACG,OAHb,wBAIVU,MAAM,CAACJ,IAJG,EAIIT,KAAK,CAACG,OAAN,IAAiBH,KAAK,CAACS,IAJ3B,wBAKVI,MAAM,CAACP,GALG,EAKGN,KAAK,CAACM,GALT,QADf;EAQE,IAAA,OAAO,EAAEL,GAAG,KAAK,KAAR,GAAgBD,KAAK,CAACgB,OAAtB,GAAgCC,SAR3C;EASE,IAAA,aAAa,EAAE,CAACjB,KAAK,CAACG,OAAP,GAAiBH,KAAK,CAACkB,MAAvB,GAAgCD,SATjD;EAUE,IAAA,KAAK,EAAEjB,KAAK,CAACmB,EAVf;EAWE,kBAAYnB,KAAK,CAACmB,EAXpB;EAYE,IAAA,GAAG,EAAEnB,KAAK,CAACmB,EAZb;EAaE,IAAA,KAAK,EAAEjB,KAAK,GAAG;EAAEkB,MAAAA,eAAe,gBAASlB,KAAT;EAAjB,KAAH,GAA0Ce;EAbxD,IADF;EAiBD,CAtCD;;ACLA,eAAe;;ACAf,eAAe;;ACAf,eAAe;;ACAf,eAAe;;ACAf,eAAe;;ACAf,eAAe;;ACAf,eAAe;;ACAf,eAAe;;ACAf,eAAe;;ACAf,eAAe;;ACAf,eAAe;;mNAAoM;;;;;;;;;;;;;;;;ECInN,IAAMI,OAAO,GAAG,SAAVA,OAAU,CAAArB,KAAK;EAAA,SACnBW;EAAK,IAAA,SAAS,EAAEE,MAAM,CAACS;EAAvB,KACGtB,KAAK,CAACuB,KAAN,CACEC,QADF,GAEEC,QAFF,CAEW,CAFX,EAEc,GAFd,EAGEC,KAHF,CAGQ,EAHR,EAIEC,GAJF,CAIM,UAACC,CAAD,EAAIC,GAAJ;EAAA,WACHlB;EAAK,MAAA,GAAG,EAAEkB,GAAV;EAAe,MAAA,GAAG,EAAEC,MAAM,gBAAS,CAACF,CAAV,EAAN,IAAwBE,MAA5C;EAA2D,MAAA,GAAG,EAAEF;EAAhE,MADG;EAAA,GAJN,CADH,CADmB;EAAA,CAArB;;ECAA,IAAMG,MAAM,GAAG,SAATA,MAAS,CAAA/B,KAAK;EAAA,SAClBW;EAAK,IAAA,SAAS,EAAEE,MAAM,CAACmB;EAAvB,KACErB,6BAAC,OAAD;EAAS,IAAA,KAAK,EAAEX,KAAK,CAACiC,UAAN,GAAmBjC,KAAK,CAACkC;EAAzC,IADF,EAEEvB;EAAQ,IAAA,SAAS,EAAC,EAAlB;EAAqB,IAAA,OAAO,EAAEX,KAAK,CAACmC,OAApC;EAA6C,IAAA,IAAI,EAAC;EAAlD,IAFF,EAGExB,6BAAC,OAAD;EAAS,IAAA,KAAK,EAAEX,KAAK,CAACoC;EAAtB,IAHF,CADkB;EAAA,CAApB;;ECEA,IAAMC,sCAAsC,GAAG,SAAzCA,sCAAyC,CAACC,QAAD,EAAWT,GAAX,EAAmB;EAChE,MAAMU,gBAAgB,GAAG,CAACV,GAAG,GAAGS,QAAP,EAAiBT,GAAG,GAAGS,QAAvB,CAAzB;EACA,MAAME,QAAQ,GAAG,CAACX,GAAG,GAAGS,QAAN,GAAiB,CAAlB,EAAqBT,GAAG,GAAG,CAA3B,EAA8BA,GAAG,GAAGS,QAAN,GAAiB,CAA/C,CAAjB;EACA,MAAMG,SAAS,GAAG,CAACZ,GAAG,GAAGS,QAAN,GAAiB,CAAlB,EAAqBT,GAAG,GAAG,CAA3B,EAA8BA,GAAG,GAAGS,QAAN,GAAiB,CAA/C,CAAlB;EAEA,MAAMI,YAAY,GAAGb,GAAG,GAAGS,QAAN,KAAmB,CAAxC;EACA,MAAMK,aAAa,GAAGd,GAAG,GAAGS,QAAN,KAAmBA,QAAQ,GAAG,CAApD;;EAEA,MAAI,CAACI,YAAD,IAAiB,CAACC,aAAtB,EAAqC;EACnCJ,IAAAA,gBAAgB,CAACK,IAAjB,OAAAL,gBAAgB,EAASC,QAAT,QAAsBC,SAAtB,EAAhB;EACD,GAFD,MAEO,IAAI,CAACC,YAAL,EAAmB;EACxBH,IAAAA,gBAAgB,CAACK,IAAjB,OAAAL,gBAAgB,EAASC,QAAT,CAAhB;EACD,GAFM,MAEA,IAAI,CAACG,aAAL,EAAoB;EACzBJ,IAAAA,gBAAgB,CAACK,IAAjB,OAAAL,gBAAgB,EAASE,SAAT,CAAhB;EACD;;EACD,SAAOF,gBAAgB,CAACM,MAAjB,CAAwB,UAAAC,KAAK;EAAA,WAAIA,KAAK,GAAG,CAAC,CAAT,IAAcA,KAAK,YAAGR,QAAH,EAAe,CAAf,CAAvB;EAAA,GAA7B,CAAP;EACD,CAhBD;;EAkBA,IAAMS,QAAQ,GAAG,SAAXA,QAAW,CAACT,QAAD,EAAWU,UAAX,EAA0B;EACzC,MAAMC,KAAK,GAAG,EAAd;;EACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,UAApB,EAAgCE,CAAC,IAAI,CAArC,EAAwC;EACtC,QAAIC,WAAW,GAAG,CAAC,CAAnB;;EACA,WAAOA,WAAW,KAAK,CAAC,CAAxB,EAA2B;EACzB,UAAMC,YAAY,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,cAAgBjB,QAAhB,EAA4B,CAA5B,CAAX,CAArB;;EACA,UAAI,CAACW,KAAK,CAACO,QAAN,CAAeJ,YAAf,CAAL,EAAmC;EACjCD,QAAAA,WAAW,GAAGC,YAAd;EACD;EACF;;EACDH,IAAAA,KAAK,CAACL,IAAN,CAAWO,WAAX;EACD;;EACD,SAAOF,KAAP;EACD,CAbD;;EAeA,IAAMQ,UAAU,GAAG,SAAbA,UAAa,CAACnB,QAAD,EAAWW,KAAX,EAAqB;EACtC,MAAMS,SAAS,GAAGX,QAAQ,CAACT,QAAD,EAAWW,KAAX,CAA1B;EACA,SAAO,IAAIU,KAAJ,UAAUrB,QAAV,EAAsB,CAAtB,GACJsB,IADI,CACC;EACJzD,IAAAA,OAAO,EAAE,KADL;EAEJC,IAAAA,OAAO,EAAE;EAFL,GADD,EAKJuB,GALI,CAKA,UAACkC,KAAD,EAAQhC,GAAR,EAAgB;EACnB,QAAMU,gBAAgB,GAAGF,sCAAsC,CAC7DC,QAD6D,EAE7DT,GAF6D,CAA/D;EAIA,QAAInB,YAAY,GAAG,CAAnB;EACA6B,IAAAA,gBAAgB,CAACuB,OAAjB,CAAyB,UAAAC,GAAG,EAAI;EAC9B,UAAIL,SAAS,CAACF,QAAV,CAAmBO,GAAnB,CAAJ,EAA6B;EAC3BrD,QAAAA,YAAY,IAAI,CAAhB;EACD;EACF,KAJD;EAKA,6BACKmD,KADL;EAEEG,MAAAA,MAAM,EAAEN,SAAS,CAACF,QAAV,CAAmB3B,GAAnB,CAFV;EAGEnB,MAAAA,YAAY,EAAZA;EAHF;EAKD,GArBI,CAAP;EAsBD,CAxBD;;EA0BA,IAAMuD,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAQC,YAAR,EAAyB;EAC1CC,EAAAA,OAAO,CAACC,GAAR,CAAYF,YAAZ;EACA,MAAMG,sBAAsB,GAAGjC,sCAAsC,CACnEgB,IAAI,CAACkB,IAAL,CAAUL,KAAK,CAACM,MAAhB,CADmE,EAEnEL,YAFmE,CAArE;;EAIA,MAAIA,YAAY,GAAGD,KAAK,CAACM,MAAN,GAAe,CAAlC,EAAqC;EACnC,WAAON,KAAP;EACD;;EAEDA,EAAAA,KAAK,CAACC,YAAD,CAAL,CAAoBhE,OAApB,GAA8B,IAA9B;EAEAmE,EAAAA,sBAAsB,CAACR,OAAvB,CAA+B,UAAAjC,GAAG,EAAI;EACpC,QAAI,CAACqC,KAAK,CAACrC,GAAD,CAAN,IAAeqC,KAAK,CAACrC,GAAD,CAAL,CAAWmC,MAA1B,IAAoCE,KAAK,CAACrC,GAAD,CAAL,CAAW1B,OAAnD,EAA4D;EAC1D;EACD;;EACD,QAAI,CAAC+D,KAAK,CAACrC,GAAD,CAAL,CAAWnB,YAAhB,EAA8B;EAC5BuD,MAAAA,UAAU,CAACC,KAAD,EAAQrC,GAAR,CAAV;EACD,KAFD,MAEO;EACLqC,MAAAA,KAAK,CAACrC,GAAD,CAAL,CAAW1B,OAAX,GAAqB,IAArB;EACD;EACF,GATD;EAWA,SAAO+D,KAAP;EACD,CAxBD;;EA0BA,IAAMO,WAAW,GAAG,SAAdA,WAAc,CAACP,KAAD,EAAQC,YAAR,EAAyB;EAC3C,MAAMO,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeX,KAAf,CAAX,CAAlB;EACA,SAAOD,UAAU,CAACS,SAAD,EAAYP,YAAZ,CAAjB;EACD,CAHD;;EAKA,IAAMW,IAAI,GAAG,SAAPA,IAAO,CAAA9E,KAAK,EAAI;EAAA;;EAAA,kBACc+E,cAAQ,CACxCtB,UAAU,CAACzD,KAAK,CAACsC,QAAP,EAAiBtC,KAAK,CAACiD,KAAvB,CAD8B,CADtB;EAAA;EAAA,MACb+B,UADa;EAAA,MACDC,WADC;;EAAA,mBAIaF,cAAQ,CAAC,EAAD,CAJrB;EAAA;EAAA,MAIb3E,OAJa;EAAA,MAIJ8E,aAJI;;EAAA,mBAKmBH,cAAQ,CAAC,EAAD,CAL3B;EAAA;EAAA,MAKb1E,UALa;EAAA,MAKD8E,gBALC;;EAAA,mBAMmBJ,cAAQ,CAAC,CAAD,CAN3B;EAAA;EAAA,MAMbK,UANa;EAAA,MAMDC,gBANC;;EAAA,mBAOYN,cAAQ,CAAC,IAAD,CAPpB;EAAA;EAAA,MAObO,QAPa;EAAA,MAOHC,WAPG;;EASpB,MAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;EACpBP,IAAAA,WAAW,CAACxB,UAAU,CAACzD,KAAK,CAACsC,QAAP,EAAiBtC,KAAK,CAACiD,KAAvB,CAAX,CAAX;EACAiC,IAAAA,aAAa,CAAC,EAAD,CAAb;EACAC,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;EACAI,IAAAA,WAAW,CAAC,IAAD,CAAX;EACD,GALD;;EAOAE,EAAAA,eAAS,CAAC,YAAM;EACd,QAAMC,SAAS,GAAGV,UAAU,CAACnC,MAAX,CAAkB,UAAA/B,IAAI;EAAA,aAAI,CAACA,IAAI,CAACX,OAAV;EAAA,KAAtB,EAAyCqE,MAA3D;;EACA,QAAIkB,SAAS,KAAK,CAAlB,EAAqB;EACnBH,MAAAA,WAAW,CAAC;EAAEI,QAAAA,IAAI,EAAE;EAAR,OAAD,CAAX;EACD,KAFD,MAEO,IAAID,SAAS,KAAK1F,KAAK,CAACiD,KAAxB,EAA+B;EACpCsC,MAAAA,WAAW,CAAC;EAAEK,QAAAA,GAAG,EAAE;EAAP,OAAD,CAAX;EACD;EACF,GAPQ,EAONZ,UAPM,CAAT;EASAS,EAAAA,eAAS,CAACD,OAAD,EAAU,CAACxF,KAAK,CAAC6F,MAAP,CAAV,CAAT;;EAEA,MAAM7E,OAAO,GAAG,SAAVA,OAAU,CAAA8E,CAAC,EAAI;EACnB,QAAMvE,KAAK,GAAG,CAACuE,CAAC,CAACC,MAAF,CAASC,OAAT,CAAiBzE,KAAhC;EACA8D,IAAAA,gBAAgB,CAACD,UAAU,GAAG,CAAd,CAAhB;;EACA,QAAIJ,UAAU,CAACzD,KAAD,CAAV,CAAkByC,MAAtB,EAA8B;EAC5B,UAAMiC,YAAY,GAAGjB,UAAU,CAACrD,GAAX,CAAe,UAAAoC,GAAG;EAAA,iCAAUA,GAAV;EAAe5D,UAAAA,OAAO,EAAE;EAAxB;EAAA,OAAlB,CAArB;EACA8F,MAAAA,YAAY,CAAC1E,KAAD,CAAZ,CAAoBjB,GAApB,GAA0B,IAA1B;EACA2E,MAAAA,WAAW,CAACgB,YAAD,CAAX;EACA;EACD;;EACD,QAAMC,CAAC,GAAGzB,WAAW,CAACO,UAAD,EAAazD,KAAb,CAArB;EACA0D,IAAAA,WAAW,CAACiB,CAAD,CAAX;EACD,GAXD;;EAaA,MAAMhF,MAAM,GAAG,SAATA,MAAS,CAAA4E,CAAC,EAAI;EAClB,QAAMvE,KAAK,GAAG,CAACuE,CAAC,CAACC,MAAF,CAASC,OAAT,CAAiBzE,KAAhC;EACAuE,IAAAA,CAAC,CAACK,cAAF;EACAL,IAAAA,CAAC,CAACM,eAAF;EACA,QAAMC,cAAc,GAAGjG,OAAO,CAACoD,QAAR,CAAiBjC,KAAjB,CAAvB;EACA,QAAM+E,iBAAiB,GAAGjG,UAAU,CAACmD,QAAX,CAAoBjC,KAApB,CAA1B;;EACA,QAAI+E,iBAAJ,EAAuB;EACrBnB,MAAAA,gBAAgB,CAAC9E,UAAU,CAACwC,MAAX,CAAkB,UAAAkB,GAAG;EAAA,eAAIA,GAAG,KAAKxC,KAAZ;EAAA,OAArB,CAAD,CAAhB;EACA;EACD;;EACD,QAAI8E,cAAJ,EAAoB;EAClBnB,MAAAA,aAAa,CAAC9E,OAAO,CAACyC,MAAR,CAAe,UAAAkB,GAAG;EAAA,eAAIA,GAAG,KAAKxC,KAAZ;EAAA,OAAlB,CAAD,CAAb;EACA4D,MAAAA,gBAAgB,8BAAK9E,UAAL,IAAiBkB,KAAjB,GAAhB;EACA;EACD;;EACD2D,IAAAA,aAAa,8BAAK9E,OAAL,IAAcmB,KAAd,GAAb;EACD,GAhBD;;EAkBA,SACEZ;EACE,IAAA,SAAS,EAAEC,EAAE,CAACC,MAAM,CAAC0F,WAAR,kCACV1F,MAAM,CAAC+E,GADG,EACGN,QAAQ,IAAIA,QAAQ,CAACM,GADxB,wBAEV/E,MAAM,CAAC8E,IAFG,EAEIL,QAAQ,IAAIA,QAAQ,CAACK,IAFzB;EADf,KAMEhF,6BAAC,MAAD;EACE,IAAA,UAAU,EAAEX,KAAK,CAACiD,KADpB;EAEE,IAAA,aAAa,EAAE7C,OAAO,CAACoE,MAFzB;EAGE,IAAA,OAAO,EAAEgB,OAHX;EAIE,IAAA,UAAU,EAAEJ,UAJd;EAKE,IAAA,QAAQ,EAAEE;EALZ,IANF,EAaE3E;EACE,IAAA,SAAS,EAAEE,MAAM,CAAC2F,IADpB;EAEE,IAAA,KAAK,EAAE;EACLC,MAAAA,mBAAmB,mBAAYzG,KAAK,CAACsC,QAAlB;EADd;EAFT,KAMG0C,UAAU,CAACrD,GAAX,CAAe,UAACb,IAAD,EAAOe,GAAP;EAAA,WACdlB,6BAAC,IAAD;EACE,MAAA,IAAI,EAAEG,IAAI,CAACkD,MADb;EAEE,MAAA,OAAO,EAAElD,IAAI,CAACX,OAFhB;EAGE,MAAA,GAAG,EAAEW,IAAI,CAACR,GAHZ;EAIE,MAAA,OAAO,EAAEF,OAAO,CAACoD,QAAR,CAAiB3B,GAAjB,CAJX;EAKE,MAAA,UAAU,EAAExB,UAAU,CAACmD,QAAX,CAAoB3B,GAApB,CALd;EAME,MAAA,YAAY,EAAEf,IAAI,CAACJ,YANrB;EAOE,MAAA,QAAQ,EAAE4E,QAPZ;EAQE,MAAA,OAAO,EAAEtE,OARX;EASE,MAAA,MAAM,EAAEE,MATV;EAUE,MAAA,EAAE,EAAEW;EAVN,MADc;EAAA,GAAf,CANH,CAbF,CADF;EAqCD,CA/FD;;EAiGAiD,IAAI,CAAC4B,YAAL,GAAoB;EAClBpE,EAAAA,QAAQ,EAAE,CADQ;EAElBW,EAAAA,KAAK,EAAE;EAFW,CAApB;;EC9LA,IAAM0D,GAAG,GAAG,SAANA,GAAM,CAAA3G,KAAK,EAAI;EACnB,SACEW,6BAACiG,IAAD;EAAM,IAAA,MAAM,EAAE5G,KAAK,CAACmB,EAApB;EAAwB,IAAA,QAAQ,EAAEnB,KAAK,CAACsC,QAAxC;EAAkD,IAAA,KAAK,EAAEtC,KAAK,CAACiD;EAA/D,IADF;EAGD,CAJD;;EAMA0D,GAAG,CAACD,YAAJ,GAAmB;EACjBb,EAAAA,MAAM,EAAE,CADS;EACN;EACXvD,EAAAA,QAAQ,EAAE,EAFO;EAEH;EACdW,EAAAA,KAAK,EAAE;EAHU,CAAnB;;;;;;;;"}